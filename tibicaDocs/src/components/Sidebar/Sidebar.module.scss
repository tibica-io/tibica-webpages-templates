@import '../../styles/variables/index';
@import '../../styles/mixins/em';


.sidebar {
    display: flex;
    flex-direction: column;
    color: white;
    height: 100%;
    width: em($sidebar-max-width);

    &__header {
        padding: 24px 16px 16px;
        display: flex;
        flex-direction: column;
        gap: 16px;
        border-bottom: 1px solid rgba(0, 0, 0, 0.20);
        background: $gray900;
    }

    &__main {
        display: flex;
        flex-direction: column;
        flex-grow: 1;
    }

    &__body {
        flex-grow: 1;
        background: #071531;
        border-bottom: 1px solid rgba(0, 0, 0, 0.20);
        overflow: hidden;
    }

    &__footer {
        background: $gray900;
        padding: 12px 16px;
    }

    &__row {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    &__logo {
        display: flex;
        align-items: center;
        flex-basis: 100%;
    }

    &__logo-text {
        margin-left: 10px;
    }

    &__controls {
        display: flex;
        gap: 16px;

        button {
            background: $gray900;
            border-radius: 8px;
        }
    }
}

.command-icon {
    display: flex;
    align-items: center;
    gap: 2px;
    font-size: 14px;
}

.nav {
    display: flex;
    flex-direction: column;
    gap: 4px;

    &__item {
        margin: 0 10px 0 10px;
        text-decoration: none;
        padding: 12px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        gap: 12px;
        min-height: 51px;
        color: $white;
        background: #071531;
        transition: color 0.2s ease, background 0.2s ease;
        overflow: hidden;

        &:hover,
        &--active {
            color: #071531;
            background: $white;
        }
    }

    &__icon {
        display: flex;
        justify-content: center;
        align-items: center;
    }
}


@media (min-width: ($breakpoint-lg + 1)) {
    .sidebar {
        transition: width 0.2s ease;

        &__logo {
            margin-left: 0;
            transition: margin-left 0.2s ease;
        }

        &__logo-text {
            position: relative;
            overflow: hidden;

            svg {
                right: 0;
                position: relative;
                transition: right 0.2s ease;
            }
        }

        &__controls {
            color: $gray400;
        }

        &--closed {
            width: em($sidebar-min-width);

            .sidebar {
                &__header {
                    position: relative;
                }

                &__controls {
                    position: absolute;
                    right: 0;
                    top: 50%;
                    transform: translate(50%, -50%) rotate(180deg);
                    z-index: 15;
                }

                &__toggle {
                    width: 32px;
                    height: 32px;
                }

                &__logo {
                    margin-left: 7px;
                }

                &__logo-text svg {
                    right: 50%;
                }
            }

            .nav__icon {
                width: 56px;
                background: inherit;
            }
        }
    }

    .nav {
        &__item {
            position: relative;
        }

        &__icon {
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 50px;
            transition: width 0.2s ease;
            z-index: 10;
        }

        &__content {
            position: absolute;
            width: calc(#{$sidebar-max-width}px - 24px - 62px);
            right: 12px;
            
            overflow: hidden;
            text-overflow: ellipsis;
        }
    }
}


@media (max-width: $breakpoint-lg) {
    .sidebar {
        width: 100vw;
        z-index: 10;
        overflow: hidden;
        height: auto;

        &__header {
            height: 80px;
        }

        &__main {
            width: 100vw;
            height: calc(100vh - 80px);
            position: fixed;
            top: 80px;
            right: 0;
            transition: right .2s ease;
            z-index: 12;
        }

        &--closed {
            width: 100vw;

            .sidebar__main {
                right: 100%;
            }
        }
    }
}
